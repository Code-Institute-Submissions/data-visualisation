"use strict";var width=300,height=200,marginBottom=50,chartColor="rgb(66, 170, 143)",font="Didact Gothic",fontSize="10",bgcolor="white",loading=0;function Crypto(t,i,o,r,h,n){this.id=t,this.max=i,this.min=o,this.avg=r,this.firstDate=h,this.lastDate=n}var Ether=new Crypto,Bitcoin=new Crypto,Litecoin=new Crypto;
"use strict";drawCharts("2017-07-01");
"use strict";function drawCharts(t){drawPriceChart(setDate(t,"ether"),"#ether",width,height,"€"),drawPriceChart(setDate(t,"bitcoin"),"#bitcoin",width,height,"$"),drawPriceChart(setDate(t,"litecoin"),"#litecoin",width,height,"€"),drawVarPriceChart(setDate(t,"ether"),"#ether-var",width,height,"€"),drawVarPriceChart(setDate(t,"bitcoin"),"#bitcoin-var",width,height,"$"),drawVarPriceChart(setDate(t,"litecoin"),"#litecoin-var",width,height,"€")}
"use strict";function drawPriceChart(t,e,n,r,a){queue().defer(d3.csv,t).await(function(t,i){loading++,progress(loading),t&&console.log(t);var o,c,l,s,d=e.substr(1);d.toString(),document.getElementById(d).innerHTML="<p>".concat(i[0].High," ").concat(a," </p>"),o=d3.max(i,function(t){return+t.High}),c=d3.min(i,function(t){return+t.High}),l=d3.min(i,function(t){return t.Date}),s=d3.max(i,function(t){return t.Date});var g=d3.time.scale().domain([new Date(l),new Date(s)]).range([10,n-41]),u=d3.svg.axis().scale(g),f=d3.scale.linear().domain([0,o-c]).range([0,r-10-marginBottom]);if(h){var m=h.select(e);m.exit().remove(),console.log("there is svg")}var h=d3.select(e).append("svg").attr("width",n).attr("height",r).style("background-color",bgcolor).append("g");d3.transition().duration(4500);h.selectAll("rect").data(i).enter().append("rect").attr("x",function(t,e){return n-n/i.length-e*((n-50)/i.length)}).attr("y",function(t){return r-marginBottom-f(t.High-c)}).attr("height",function(t){return f(t.High-c)}).attr("width",function(t){return n/i.length}).style("fill","white").append("svg:title").text(function(t){return"Date: ".concat(t.Date," Price: ").concat(t.High)}).append("g"),h.selectAll("rect").transition().duration(1500).style("fill",chartColor),h.selectAll("text").data(i).enter().append("text").text(function(t,e){return parseInt(c+.1*e*(o-c))}).attr("text-anchor","middle").attr("x",function(){return 20}).attr("y",function(t,e){return r-marginBottom-fontSize+parseInt(fontSize)-e*((r-marginBottom-fontSize)/10)}).attr("font-family",font).attr("font-size",fontSize).attr("fill","black");var p=r-marginBottom;h.append("g").attr("class","x axis").attr("transform","translate(40,".concat(p,")")).call(u).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").attr("font-size",fontSize).style("text-anchor","start")})}
"use strict";function drawVarPriceChart(t,n,e,r,a){return queue().defer(d3.csv,t).await(function(t,o){loading++,progress(loading),t&&console.log(t);var i,c,l,s,u=n.substr(1);u.toString(),document.getElementById(u).innerHTML="<p>".concat(o[0].Open," ").concat(a," </p>"),i=d3.max(o,function(t){return+t.High-t.Low}),c=d3.min(o,function(t){return+t.High-t.Low});var d=d3.mean(o,function(t){return+t.High-t.Low});l=d3.min(o,function(t){return t.Date}),s=d3.max(o,function(t){return t.Date}),d=d.toFixed(1),i=i.toFixed(1),console.log(u),document.getElementById(u+"-stat").innerHTML='\n      <li class="list-group-item">Dates: '.concat(l," to ").concat(s,'</li>\n      <li class="list-group-item">Max Price: ').concat(i," ").concat(a,'</li>\n      <li class="list-group-item">Min Price: ').concat(c.toFixed(1)," ").concat(a,'</li>\n      <li class="list-group-item">Average Variability in Price: ').concat(d," ").concat(a,"</li>\n      "),document.getElementById(u).innerHTML=" <p> Max: ".concat(i," Average: ").concat(d," ").concat(a," </p>");var g=d3.time.scale().domain([new Date(l),new Date(s)]).range([10,e-41]),m=d3.svg.axis().scale(g),f=d3.scale.linear().domain([0,i-c]).range([0,r-10-marginBottom]),h=d3.select(n).append("svg").attr("width",e).attr("height",r).style("background-color",bgcolor);h.selectAll("rect").data(o).enter().append("rect").attr("x",function(t,n){return e+0-e/o.length-n*((e-50)/o.length)}).attr("y",function(t){return r-marginBottom-f(t.High-t.Low)}).attr("height",function(t){return f(t.High-t.Low)}).attr("width",function(t){return e/o.length}).style("fill","white"),h.selectAll("rect").transition().duration(1500).style("fill",chartColor).transition().duration(3e3).style("fill",function(t){return t.High-t.Low>d?"orange":chartColor}),h.selectAll("text").data(o).enter().append("text").text(function(t,n){return parseInt(c+.1*n*(i-c))}).attr("text-anchor","middle").attr("x",function(){return 20}).attr("y",function(t,n){return r-marginBottom-n*((r-marginBottom-fontSize)/10)}).attr("font-family",font).attr("font-size",fontSize).attr("fill","black");var p=r-marginBottom;h.append("g").attr("class","x axis").attr("transform","translate(40,"+p+")").call(m).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").attr("font-size",fontSize).style("text-anchor","start")}),"done"}
"use strict";function progress(e){document.getElementById("progress").innerHTML="Loading data: ".concat((e/6*100).toFixed(0),"%"),document.getElementById("progress").style.width="".concat(e/6*100,"%"),document.getElementById("progress-bar").style.display=6==e||0==e?"none":"block"}
"use strict";function drawChartsSelectMonths(a){6==loading&&(loading=0,drawCharts(setDateScope(a)))}function alldata(){6==loading&&(loading=0,drawCharts("2017-07-01"))}
"use strict";function setDateScope(t){var a=new Date;return a.setMonth(a.getMonth()-t),a.toISOString().slice(0,10)}function setDate(t,a){var e="&start_date="+t;return"bitcoin"==a?"https://www.quandl.com/api/v3/datasets/BITSTAMP/USD.csv?api_key=fzanZC3297Jsid-E8vCF"+e:"ether"==a?"https://www.quandl.com/api/v3/datasets/GDAX/ETH_EUR.csv?api_key=fzanZC3297Jsid-E8vCF"+e:"litecoin"==a?"https://www.quandl.com/api/v3/datasets/GDAX/LTC_EUR.csv?api_key=fzanZC3297Jsid-E8vCF"+e:void 0}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LXNldHRpbmdzLWFuZC1kYXRhLmpzIiwiZHJhdy1jaGFydC5qcyIsImZ1bmN0aW9ucy9kcmF3Q2hhcnRzLmpzIiwiZnVuY3Rpb25zL2RyYXdQcmljZUNoYXJ0LmpzIiwiZnVuY3Rpb25zL2RyYXdWYXJQcmljZUNoYXJ0LmpzIiwiZnVuY3Rpb25zL3Byb2dyZXNzLmpzIiwiZnVuY3Rpb25zL3JhZGlvYnV0dG9ucy5qcyIsImZ1bmN0aW9ucy9zZXREYXRlLmpzIl0sIm5hbWVzIjpbIndpZHRoIiwiaGVpZ2h0IiwibWFyZ2luQm90dG9tIiwiY2hhcnRDb2xvciIsImZvbnQiLCJmb250U2l6ZSIsIkNyeXB0byIsImlkIiwibWF4IiwibWluIiwiYXZnIiwiZmlyc3REYXRlIiwibGFzdERhdGUiLCJ0aGlzIiwiRXRoZXIiLCJCaXRjb2luIiwiZHJhd0NoYXJ0cyIsImRhdGUiLCJkcmF3UHJpY2VDaGFydCIsInNldERhdGUiLCJkcmF3VmFyUHJpY2VDaGFydCIsImRhdGEiLCJjdXJyZW5jeSIsInF1ZXVlIiwiZGVmZXIiLCJlcnJvciIsInRyYW5zYWN0aW9uc0RhdGEiLCJsb2FkaW5nIiwicHJvZ3Jlc3MiLCJjb25zb2xlIiwibG9nIiwiYSIsInRvU3RyaW5nIiwiZG9jdW1lbnQiLCJzdWJzdHIiLCJnZXRFbGVtZW50QnlJZCIsImlubmVySFRNTCIsImNvbmNhdCIsIkhpZ2giLCJkIiwiZDMiLCJEYXRlIiwieCIsInRpbWUiLCJzY2FsZSIsInJhbmdlIiwic3ZnIiwibGluZWFyIiwiZG9tYWluIiwiYXhpcyIsInBhdGgiLCJzZWxlY3QiLCJleGl0IiwicmVtb3ZlIiwiYXBwZW5kIiwiYXR0ciIsInN0eWxlIiwiYmdjb2xvciIsImR1cmF0aW9uIiwic2VsZWN0QWxsIiwiaSIsInRyYW5zaXRpb24iLCJsZW5ndGgiLCJlbnRlciIsInRleHQiLCJwYXJzZUludCIsInRtcCIsImNhbGwiLCJ4QXhpcyIsImNzdiIsImF3YWl0IiwiT3BlbiIsIkxvdyIsIm1lYW4iLCJ0b0ZpeGVkIiwiZGlzcGxheSIsImRyYXdDaGFydHNTZWxlY3RNb250aHMiLCJudW1iZXJNb250aHMiLCJzZXREYXRlU2NvcGUiLCJwZXJpb2QiLCJzZXRNb250aCIsInNsaWNlIiwidHlwZSIsImJpdGNvaW5QcmljZURhdGEiLCJzdGFydERhdGUiXSwibWFwcGluZ3MiOiJhQUFBLElBQUFBLE1BQUEsSUFDQUMsT0FBQSxJQUNNRCxhQUFOLEdBQ01DLFdBQU4sb0JBQ01DLEtBQUFBLGdCQUNBQyxTQUFXLEtBQ1hDLFFBQU8sUUFDUEMsUUFBUSxFQUtkLFNBQVNDLE9BQU9DLEVBQUlDLEVBQUtDLEVBQUtDLEVBQUtDLEVBQVdDLEdBQTlDQyxLQUFTUCxHQUFBQSxFQUNMTyxLQUFBTCxJQUFRRCxFQUNSTSxLQUFLTCxJQUFJQSxFQUNUSyxLQUFLSixJQUFJQSxFQUNUSSxLQUFLSCxVQUFMQyxFQUNBRSxLQUFLRixTQUFMQyxFQUVILElBQUFFLE1BQUEsSUFBQVIsT0FFR1MsUUFBVSxJQUFJVCxPQURkUSxTQUFRLElBQUlSO2FDZmhCVSxXQUFXO2FDSlgsU0FBU0EsV0FBV0MsR0FEcEJDLGVBQUFDLFFBQUFGLEVBQUEsU0FBQSxTQUFBakIsTUFBQUMsT0FBQSxLQUNBaUIsZUFBU0YsUUFBVEMsRUFBMEIsV0FBQSxXQUFBakIsTUFBQUMsT0FBQSxLQUN4QmlCLGVBQWVDLFFBQVFGLEVBQU0sWUFBVSxZQUF6QmpCLE1BQUFDLE9BQWQsS0FFQWlCLGtCQUFlQyxRQUFRRixFQUFNLFNBQWEsYUFBYWpCLE1BQU9DLE9BQVEsS0FFdEVtQixrQkFBa0JELFFBQVFGLEVBQU0sV0FBVSxlQUFjakIsTUFBT0MsT0FBL0QsS0FDQW1CLGtCQUFrQkQsUUFBUUYsRUFBTSxZQUFZLGdCQUFnQmpCLE1BQU9DLE9BQVE7YUNKN0UsU0FBU2lCLGVBQWVHLEVBQU1kLEVBQUlQLEVBQU9DLEVBQVFxQixHQUZqREMsUUFFQUMsTUFBU04sR0FBQUEsSUFBQUEsR0FDUEssTUFJQSxTQUFvQkUsRUFBT0MsR0FDekJDLFVBQ0FDLFNBQVNELFNBQ0xGLEdBQVNJLFFBQVFDLElBQUlMLEdBQXpCLElBQ01NLEVBQ0pDLEVBQ0ZDLEVBRUl6QixFQUxBaUIsRUFBSmxCLEVBQVcyQixPQUFBLEdBQUVMLEVBQUFBLFdBQXFCSSxTQUFBRSxlQUFBSixHQUFBSyxVQUFBLE1BQUFDLE9BQUFYLEVBQUEsR0FBQVksS0FBQSxLQUFBRCxPQUFBZixFQUFBLFNBT2xDZCxFQUFJRyxHQUFBQSxJQUFKZSxFQUFBLFNBQUFhLEdBQUEsT0FBQUEsRUFBQUQsT0FDQTdCLEVBQUlHLEdBQUFBLElBQUpjLEVBQUEsU0FBQWEsR0FBQSxPQUFBQSxFQUFBRCxPQUVBOUIsRUFBTWdDLEdBQU9kLElBQUFBLEVBQWtCLFNBQUFhLEdBQUEsT0FBQ0EsRUFBQUUsT0FBQTdCLEVBQU00QixHQUFDRixJQUFQWixFQUFBLFNBQUFhLEdBQUEsT0FBQUEsRUFBQUUsT0FDQSxJQUFoQ0MsRUFBQUYsR0FBQUcsS0FBQUMsUUFDQWpDLFFBQVMsSUFBTUYsS0FBSWlCLEdBQUFBLElBQVBlLEtBQXlCN0IsS0FBQ2lDLE9BQUssR0FBQ0osRUFBTixLQUN0QzdCLEVBQWNKLEdBQUhzQyxJQUFPcEIsT0FBbUJrQixNQUFJTCxHQVluQ0ssRUFBUUosR0FBR0ksTUFBTUcsU0FKdkJDLFFBQVcsRUFBS3hDLEVBQUt5QyxJQUlyQkosT0FBVyxFQUFHTCxFQUFTTyxHQUFUN0MsZUFLZCxHQUFJNEMsRUFBSyxDQUNQLElBQU1JLEVBQU9KLEVBQUlLLE9BQUo1QyxHQUNiMkMsRUFBS0UsT0FBT0MsU0FDWnhCLFFBQVFDLElBQUksZ0JBRWQsSUFBTWdCLEVBQU1OLEdBQUdXLE9BQU81QyxHQUF0QitDLE9BQVlkLE9BTVZlLEtBQUEsUUFBQXZELEdBQ0F1RCxLQUFBLFNBQUF0RCxHQUNBdUQsTUFBQSxtQkFBQUMsU0FZQ0YsT0FMSCxLQUt1QnZELEdBQ3BCdUQsYUFBV0csU0FBSXpELE1BQ0M2QyxFQUNoQlMsVUFBSyxRQUFVbEMsS0FBQUssR0FDZjhCLFFBRU1GLE9BQUEsUUFLTkMsS0FBQ0ksSUFBSixTQUFjcEIsRUFBQXFCLEdBQWQsT0FDR0MsRUFBQUEsRUFDQUgsRUFDTUksT0FBUTNELElBQUFBLEVBR2pCLElBQUF1QixFQUFBb0MsVUFoQkdQLEtBQUssSUFBSyxTQUFBaEIsR0FBQyxPQUFJdEMsRUFBU0MsYUFBZTBDLEVBQU1MLEVBQUVELEtBQU83QixLQWlCdEQ4QyxLQUFDSSxTQUFVLFNBQUFwQixHQUFBLE9BQ1hsQixFQUFLSyxFQUFBQSxLQUFBQSxLQUdBNkIsS0FBQSxRQUFrQixTQUFBaEIsR0FBQzlCLE9BQUdULEVBQVEwQixFQUFab0MsU0FDdkJQLE1BQUssT0FBQSxTQUNLRCxPQUFNLGFBQ2hCQyxLQUFLLFNBQUFoQixHQUFBLE1BQUEsU0FBQUYsT0FBS0UsRUFBQUUsS0FBTCxZQUFBSixPQUFLRSxFQUFBRCxRQUNWaUIsT0FBSyxLQU9SVCxFQUFJUSxVQUFKLFFBY0FPLGFBQ0FILFNBQUEsTUFDQUYsTUFBQSxPQUFBckQsWUFLQTJDLEVBQUFhLFVBQUEsUUFFQXRDLEtBQUFLLEdBRUFxQyxRQUNBVCxPQUFBLFFBRUFVLEtBQUEsU0FBQXpCLEVBQUFxQixHQUFBLE9BQUFLLFNBQUF4RCxFQUFBLEdBQUFtRCxHQUFBcEQsRUFBQUMsTUFDQThDLEtBQUEsY0FBQSxVQUNBQSxLQUFBLElBQUEsV0FBQSxPQUFBLEtBRUFBLEtBQUEsSUFBQSxTQUFBaEIsRUFBQXFCLEdBQUEsT0FBQTNELEVBQUFDLGFBQUFHLFNBQUE0RCxTQUFBNUQsVUFBQXVELElBQUEzRCxFQUFBQyxhQUFBRyxVQUFBLE1BRUFrRCxLQUFBLGNBQUFuRCxNQUNBbUQsS0FBQSxZQUFBbEQsVUFFQWtELEtBQUEsT0FBQSxTQXZDQSxJQUFNVyxFQUFNakUsRUFBU0MsYUFFckI0QyxFQUFJUSxPQUFPLEtBQ1JDLEtBQUssUUFBUyxVQUNkQSxLQUFLLFlBRlIsZ0JBQUFsQixPQUVxQzZCLEVBRnJDLE1BR0dDLEtBQUtDLEdBQ0xULFVBQVUsUUFDVkosS0FBSyxJQUFLLEdBQ1ZBLEtBQUssSUFBSyxHQUNWQSxLQUFLLEtBQU0sU0FDWEEsS0FBSyxZQUFhLGNBQ2xCQSxLQUFLLFlBQWFsRCxVQUNsQm1ELE1BQU0sY0FBZTthQzdHNUIsU0FBQXBDLGtCQUFBQyxFQUFBZCxFQUFBUCxFQUFBQyxFQUFBcUIsR0EySEUsT0F6SEZDLFFBQ0VBLE1BQ0dDLEdBQUFBLElBQVM2QyxHQUNUQyxNQUdEM0MsU0FBT0YsRUFBQUMsR0FDUEUsVUFBQUEsU0FBU0QsU0FHVEUsR0FDQ0EsUUFBQUMsSUFBQUwsR0FDRCxJQUtJaEIsRUFDQUUsRUFDQUMsRUFFREEsRUFUSW1CLEVBQUt4QixFQUFDMkIsT0FBYixHQUNBSCxFQUFFQyxXQUNGQyxTQUFTRSxlQUFlSixHQUFHSyxVQUEzQkgsTUFBQUEsT0FBQVAsRUFBNkNBLEdBQUFBLEtBQTdDTyxLQUFBQSxPQUFpRXNDLEVBQWpFdEMsU0FPZ0N6QixFQUFoQ2dDLEdBQUFoQyxJQUFBa0IsRUFBQSxTQUFBYSxHQUFBLE9BQUFBLEVBQUFELEtBQUFDLEVBQUFpQyxNQUNBL0QsRUFBTStCLEdBQUcvQixJQUFJaUIsRUFBa0IsU0FBQWEsR0FBQSxPQUFBQSxFQUFBRCxLQUFDQyxFQUFBaUMsTUFBQSxJQUFBOUQsRUFBSzZCLEdBQUVELEtBQUhaLEVBQUosU0FBQWEsR0FBQSxPQUFBQSxFQUFBRCxLQUFBQyxFQUFBaUMsTUFBQTdELEVBQWhDNkIsR0FBQS9CLElBQUFpQixFQUFBLFNBQUFhLEdBQUEsT0FBQUEsRUFBQUUsT0FDQTdCLEVBQVU0QixHQUFHaUMsSUFBSy9DLEVBQWtCLFNBQUFhLEdBQUEsT0FBQUEsRUFBQUUsT0FDRS9CLEVBQUFBLEVBQUtnRSxRQUFMLEdBQUFsRSxFQUF0Q0EsRUFBQWtFLFFBQUEsR0FLQWhFLFFBQU1BLElBQUlnRSxHQUNWbEUsU0FBVWtFLGVBQ1YzQyxFQUFBLFNBQUFLLFVBREE1Qiw4Q0FBQUEsT0FHQUcsRUFIQUgsUUFBQUEsT0FHQUksRUFIQUosd0RBQUFBLE9BTzJDQSxFQVAzQ0EsS0FBQUEsT0FPa0RjLEVBUGxEZCx3REFBQUEsT0FJQUMsRUFBQWlFLFFBQUEsR0FKQWxFLEtBQUFBLE9BSUFjLEVBSkFkLDJFQUFBQSxPQUtFRSxFQUxGRixLQUFBQSxPQUtFYyxFQUxGZCxpQkFxQkF5QixTQUFXRSxlQUFHSixHQUNYYSxVQURILGFBQUFQLE9BQUE3QixFQUFBLGNBQUE2QixPQUFBM0IsRUFBQSxLQUFBMkIsT0FBQWYsRUFBQSxTQUpBLElBQU1vQixFQUFJRixHQUFHRyxLQUFLQyxRQVlsQkksUUFBWVIsSUFBR1csS0FBTzVDLEdBQ1osSUFERWtDLEtBRVRjLEtBS0FWLE9BQUNjLEdBQVUzRCxFQUNYcUIsS0FHVStDLEVBQWU1QixHQUFHTSxJQUFJOUMsT0FDaEN1RCxNQUFLYixHQUNXRSxFQUFTSixHQUFHRixNQUFGUyxTQUMxQlEsUUFBSyxFQUFBL0MsRUFBU0MsSUFBQ29DLE9BQUk3QyxFQUFBQSxFQUFRMEIsR0FBQUEsZUFLMUJpQyxFQUFBQSxHQUFVUixPQUNYVSxHQU1EUCxPQUFNaEIsT0FBc0JpQixLQUFBLFFBQUF2RCxHQUN4QnVELEtBQUEsU0FBT3RELEdBRFh1RCxNQUVPLG1CQUFBQyxTQUdWWCxFQUdDYSxVQUFBLFFBMUJHdEMsS0FBS0ssR0EyQkxxQyxRQUlLVCxPQUFVVyxRQUNmVixLQUFLLElBQUEsU0FBQWhCLEVBQUFxQixHQUFBLE9BQWU1RCxFQUx2QixFQU1HdUQsRUFBVTdCLEVBQUFvQyxPQUFBRixJQUFBNUQsRUFBQSxJQUFBMEIsRUFBQW9DLFVBQUFQLEtBQUEsSUFBQSxTQUFBaEIsR0FBQSxPQUFBdEMsRUFBQUMsYUFBQTBDLEVBQUFMLEVBQUFELEtBQUFDLEVBQUFpQyxPQUNWakIsS0FBSyxTQUFLLFNBQUFoQixHQUFBLE9BQUNBLEVBQURBLEVBQUFELEtBQUFDLEVBQUFpQyxPQUFBakIsS0FBQSxRQUFnQixTQUFBaEIsR0FBR3JDLE9BQUFBLEVBQVR3QixFQUFxQ29DLFNBQ3pEUCxNQUFLLE9BQUEsU0FrQlRULEVBQUFhLFVBQUEsUUF6Q0lFLGFBMENMSCxTQUFBLE1BQ0RGLE1BQUEsT0FBQXJELFlBeENNMEQsYUFDQUgsU0FBUyxLQUNURixNQUFNLE9BQVEsU0FBQ2pCLEdBQ2hCLE9BQUlBLEVBQUVELEtBQUtDLEVBQUVpQyxJQUFNOUQsRUFDUixTQUVBUCxhQU1iMkMsRUFBSWEsVUFBVSxRQUNYdEMsS0FBS0ssR0FDTHFDLFFBQ0FULE9BQU8sUUFDUFUsS0FBSyxTQUFDekIsRUFBR3FCLEdBQUosT0FBVUssU0FBU3hELEVBQTBCLEdBQUptRCxHQUFkcEQsRUFBTUMsTUFDdEM4QyxLQUFLLGNBQWUsVUFDcEJBLEtBQUssSUFBSyxXQUFBLE9BQU0sS0FDaEJBLEtBQUssSUFBSyxTQUFDaEIsRUFBR3FCLEdBQUosT0FBVTNELEVBQVNDLGFBQWdCMEQsSUFBTTNELEVBQVNDLGFBQWVHLFVBQVksTUFDdkZrRCxLQUFLLGNBQWVuRCxNQUNwQm1ELEtBQUssWUFBYWxELFVBQ2xCa0QsS0FBSyxPQUFRLFNBR2hCLElBQU1XLEVBQU1qRSxFQUFTQyxhQUVyQjRDLEVBQUlRLE9BQU8sS0FDUkMsS0FBSyxRQUFTLFVBQ2RBLEtBQUssWUFBYSxnQkFBa0JXLEVBQU0sS0FDMUNDLEtBQUtDLEdBQ0xULFVBQVUsUUFDVkosS0FBSyxJQUFLLEdBQ1ZBLEtBQUssSUFBSyxHQUNWQSxLQUFLLEtBQU0sU0FDWEEsS0FBSyxZQUFhLGNBQ2xCQSxLQUFLLFlBQWFsRCxVQUNsQm1ELE1BQU0sY0FBZSxXQUVuQjthQzFIVCxTQUFTNUIsU0FBU0QsR0FEbEJNLFNBQUFFLGVBQUEsWUFBQUMsVUFBQSxpQkFBQUMsUUFBQVYsRUFBQSxFQUFBLEtBQUErQyxRQUFBLEdBQUEsS0FDQXpDLFNBQVNMLGVBQVQsWUFBMkI0QixNQUFBeEQsTUFBM0IsR0FBQXFDLE9BQTJCVixFQUFBLEVBQUEsSUFBM0IsS0FFRU0sU0FBU0UsZUFBZSxnQkFBa0JuQyxNQUExQzJFLFFBRFN4QyxHQUFURixHQUF3QixHQUFmRSxFQUNULE9BQ2tDO2FDSnBDLFNBQUF5Qyx1QkFBQUMsR0FHaUIsR0FBWGxELFVBRk5BLFFBQUEsRUFDQVgsV0FBUzRELGFBQUFBLEtBR0w1RCxTQUFBQSxVQUNELEdBQUFXLFVBQ0ZBLFFBQUEsRUFLR1gsV0FBVzthQ1pmLFNBQVM4RCxhQUFhQyxHQUNsQixJQUFJeEMsRUFBSSxJQUFJRSxLQUVWdUMsT0FGRnpDLEVBQUlBLFNBQVFFLEVBQUFBLFdBQVpzQyxHQUVFQyxFQUFTekMsY0FBQTBDLE1BQWVGLEVBQTFCLElBS0osU0FBUzVELFFBQVFGLEVBQU1pRSxHQUluQixJQUFJQyxFQUFBQSxlQUFpQmxFLEVBT3BCLE1BQUEsV0FBQWlFLEVBTG9CLHVGQUFDRSxFQUdaLFNBQU5GLEVBREosdUZBQXFCRSxFQUVYLFlBQU5GLEVBRGUsdUZBQUFFLE9BQ25CIiwiZmlsZSI6InZhcmlhYmlsaXR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBqYXZhc2NyaXB0IGZpbGUgaXMgbG9hZGVkIGZpcnN0LlxuLy8gQ2hhcnRzIGNvbmZpZ1xuY29uc3Qgd2lkdGggPSAzMDA7XG5jb25zdCBoZWlnaHQgPSAyMDA7XG5jb25zdCBtYXJnaW5Cb3R0b209NTA7XG5jb25zdCBjaGFydENvbG9yPSdyZ2IoNjYsIDE3MCwgMTQzKSc7XG5jb25zdCBmb250ID0gJ0RpZGFjdCBHb3RoaWMnO1xuY29uc3QgZm9udFNpemUgPSAnMTAnO1xuY29uc3QgYmdjb2xvcj0nd2hpdGUnO1xubGV0IGxvYWRpbmc9MDtcblxuXG5mdW5jdGlvbiBDcnlwdG8oaWQsIG1heCwgbWluLCBhdmcsIGZpcnN0RGF0ZSwgbGFzdERhdGUpIHtcbiAgICB0aGlzLmlkPWlkXG4gICAgdGhpcy5tYXg9bWF4XG4gICAgdGhpcy5taW49bWluXG4gICAgdGhpcy5hdmc9YXZnXG4gICAgdGhpcy5maXJzdERhdGU9Zmlyc3REYXRlXG4gICAgdGhpcy5sYXN0RGF0ZT1sYXN0RGF0ZVxufVxubGV0IEV0aGVyID0gbmV3IENyeXB0bygpO1xubGV0IEJpdGNvaW4gPSBuZXcgQ3J5cHRvKCk7XG5sZXQgTGl0ZWNvaW4gPSBuZXcgQ3J5cHRvKCk7XG5cbiIsIi8vIFRoaXMgamF2YXNjcmlwdCBmaWxlIGlzIGxhc3QuXG4vLyBJbml0aWFsaXphdGlvbiBmdW5jdGlvbnMgb24gcGFnZSBzdGFydC5cblxuLy8gV2hlbiBwYWdlIGlzIGxvYWRpbmcgZmlyc3QgdGltZSBsb2FkIHByZXNldCB3aXRoIGFsbCBkYXRhIGZvciBjaGFydHMuXG4vKmVzbGludCBuby11bmRlZjogMCovXG5kcmF3Q2hhcnRzKCcyMDE3LTA3LTAxJyk7XG5cbiIsIi8qIGVzbGludCBuby11bmRlZjogMCovXG5mdW5jdGlvbiBkcmF3Q2hhcnRzKGRhdGUpIHtcbiAgZHJhd1ByaWNlQ2hhcnQoc2V0RGF0ZShkYXRlLCAnZXRoZXInKSwgJyNldGhlcicsIHdpZHRoLCBoZWlnaHQsICfigqwnKTtcbiAgZHJhd1ByaWNlQ2hhcnQoc2V0RGF0ZShkYXRlLCAnYml0Y29pbicpLCAnI2JpdGNvaW4nLCB3aWR0aCwgaGVpZ2h0LCAnJCcpO1xuICBkcmF3UHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdsaXRlY29pbicpLCAnI2xpdGVjb2luJywgd2lkdGgsIGhlaWdodCwgJ+KCrCcpO1xuXG4gIGRyYXdWYXJQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2V0aGVyJyksICcjZXRoZXItdmFyJywgd2lkdGgsIGhlaWdodCwgJ+KCrCcpO1xuICBkcmF3VmFyUHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdiaXRjb2luJyksICcjYml0Y29pbi12YXInLCB3aWR0aCwgaGVpZ2h0LCAnJCcpO1xuICBkcmF3VmFyUHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdsaXRlY29pbicpLCAnI2xpdGVjb2luLXZhcicsIHdpZHRoLCBoZWlnaHQsICfigqwnKTtcbn1cbiIsIi8vIFRoaXMgZnVuY3Rpb24gZHJhdyBwcmljZSBjaGFydFxuLyogZXNsaW50IG5vLXVuZGVmOiAwICovXG5cbmZ1bmN0aW9uIGRyYXdQcmljZUNoYXJ0KGRhdGEsIGlkLCB3aWR0aCwgaGVpZ2h0LCBjdXJyZW5jeSkge1xuICBxdWV1ZSgpXG4gICAgLmRlZmVyKGQzLmNzdiwgZGF0YSlcbiAgICAuYXdhaXQobWFrZUdyYXBocyk7XG5cbiAgZnVuY3Rpb24gbWFrZUdyYXBocyhlcnJvciwgdHJhbnNhY3Rpb25zRGF0YSkge1xuICAgIGxvYWRpbmcrKztcbiAgICBwcm9ncmVzcyhsb2FkaW5nKTtcbiAgICBpZiAoZXJyb3IpIHsgY29uc29sZS5sb2coZXJyb3IpOyB9XG4gICAgY29uc3QgYSA9IGlkLnN1YnN0cigxKTtcbiAgICBhLnRvU3RyaW5nKCk7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSkuaW5uZXJIVE1MID0gYDxwPiR7dHJhbnNhY3Rpb25zRGF0YVswXS5IaWdofSAke2N1cnJlbmN5fSA8L3A+YDtcblxuICAgIGxldCBtYXg7XG4gICAgbGV0IG1pbjtcbiAgICBsZXQgZmlyc3REYXRlO1xuICAgIGxldCBsYXN0RGF0ZTtcblxuICAgIG1heCA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2gpO1xuICAgIG1pbiA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2gpO1xuICAgIGZpcnN0RGF0ZSA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+IGQuRGF0ZSk7XG4gICAgbGFzdERhdGUgPSBkMy5tYXgodHJhbnNhY3Rpb25zRGF0YSwgZCA9PiBkLkRhdGUpO1xuXG4gXG5cbiAgICBjb25zdCB4ID0gZDMudGltZS5zY2FsZSgpXG4gICAgICAuZG9tYWluKFtuZXcgRGF0ZShmaXJzdERhdGUpLCBuZXcgRGF0ZShsYXN0RGF0ZSldKVxuICAgICAgLnJhbmdlKFsxMCwgd2lkdGggLSA0MV0pOyAvLyBMZWZ0IHJpZ2h0IHBvc2l0aW9uIGZvciBkYXRlIGNoYXJ0XG5cbiAgICBjb25zdCB4QXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgIC5zY2FsZSh4KTtcblxuXG4gICAgY29uc3Qgc2NhbGUgPSBkMy5zY2FsZS5saW5lYXIoKVxuICAgICAgLmRvbWFpbihbMCwgbWF4IC0gbWluXSkgLy8gQm91bmRhcmllcyBmb3IgY2hhcnRcbiAgICAgIC5yYW5nZShbMCwgaGVpZ2h0IC0gMTAgLSBtYXJnaW5Cb3R0b21dKTsgLy8gYm91bmRhcmllcyBmb3IgZGF0YVxuXG5cbiAgICBpZiAoc3ZnKSB7XG4gICAgICBjb25zdCBwYXRoID0gc3ZnLnNlbGVjdChpZCk7XG4gICAgICBwYXRoLmV4aXQoKS5yZW1vdmUoKTtcbiAgICAgIGNvbnNvbGUubG9nKCd0aGVyZSBpcyBzdmcnKTtcbiAgICB9XG4gICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KGlkKVxuICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgIC5hdHRyKCd3aWR0aCcsIHdpZHRoKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIGhlaWdodClcbiAgICAgIC5zdHlsZSgnYmFja2dyb3VuZC1jb2xvcicsIGJnY29sb3IpXG4gICAgICAvLyAuY2FsbChkMy5iZWhhdmlvci56b29tKCkub24oXCJ6b29tXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vICAgY29uc29sZS5sb2coZDMuZXZlbnQudHJhbnNsYXRlKVxuICAgICAgLy8gICBzdmcuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQzLmV2ZW50LnRyYW5zbGF0ZSArIFwiKVwiICsgXCIgc2NhbGUoXCIgKyBkMy5ldmVudC5zY2FsZSArIFwiKVwiKVxuICAgICAgLy8gfSkpXG4gICAgICAuYXBwZW5kKCdnJyk7XG4gICAgY29uc3QgdCA9IGQzXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oNDUwMCk7XG5cbiAgICAvLyBCYXJzXG4gICAgc3ZnLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAuZGF0YSh0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3JlY3QnKSAvLyBhcHBlbmQgc3ZnIHRvIGRpdlxuXG4gICAgICAuYXR0cigneCcsIChkLCBpKSA9PiB3aWR0aCAtIHdpZHRoIC8gdHJhbnNhY3Rpb25zRGF0YS5sZW5ndGggLSAoaSAqICgod2lkdGggLSA1MCkgLyB0cmFuc2FjdGlvbnNEYXRhLmxlbmd0aCkpKVxuICAgICAgLmF0dHIoJ3knLCBkID0+IGhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIHNjYWxlKGQuSGlnaCAtIG1pbikpXG4gICAgICAuYXR0cignaGVpZ2h0JywgZCA9PiBzY2FsZShkLkhpZ2ggLSBtaW4pKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgZCA9PiB3aWR0aCAvIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoKVxuICAgICAgLnN0eWxlKCdmaWxsJywgJ3doaXRlJylcbiAgICAgIC5hcHBlbmQoJ3N2Zzp0aXRsZScpXG4gICAgICAudGV4dChkID0+IGBEYXRlOiAke2QuRGF0ZX0gUHJpY2U6ICR7ZC5IaWdofWApXG5cbiAgICAgIC5hcHBlbmQoJ2cnKTtcblxuXG4gICAgc3ZnLnNlbGVjdEFsbCgncmVjdCcpXG4gICAgICAudHJhbnNpdGlvbigpXG4gICAgICAuZHVyYXRpb24oMTUwMClcbiAgICAgIC5zdHlsZSgnZmlsbCcsIGNoYXJ0Q29sb3IpO1xuXG5cbiAgICAvLyBQcmljZVxuICAgIHN2Zy5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgLmRhdGEodHJhbnNhY3Rpb25zRGF0YSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC50ZXh0KChkLCBpKSA9PiBwYXJzZUludChtaW4gKyAoKG1heCAtIG1pbikgKiAoaSAqIDAuMSkpKSlcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuICAgICAgLmF0dHIoJ3gnLCAoKSA9PiAyMClcbiAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IGhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIGZvbnRTaXplICsgcGFyc2VJbnQoZm9udFNpemUpIC0gKGkgKiAoKGhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIGZvbnRTaXplKSAvIDEwKSkpXG4gICAgICAuYXR0cignZm9udC1mYW1pbHknLCBmb250KVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKVxuICAgICAgLmF0dHIoJ2ZpbGwnLCAnYmxhY2snKTtcblxuICAgIC8vIERhdGVcbiAgICBjb25zdCB0bXAgPSBoZWlnaHQgLSBtYXJnaW5Cb3R0b207XG5cbiAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgIC5hdHRyKCdjbGFzcycsICd4IGF4aXMnKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGUoNDAsJHt0bXAgfSlgKVxuICAgICAgLmNhbGwoeEF4aXMpXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0JylcbiAgICAgIC5hdHRyKCd5JywgMClcbiAgICAgIC5hdHRyKCd4JywgOSlcbiAgICAgIC5hdHRyKCdkeScsICcuMzVlbScpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3JvdGF0ZSg5MCknKVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKVxuICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpO1xuXG5cbiAgICAvLyAvLyAxLiBDcmVhdGUgdGhlIGJ1dHRvblxuICAgIC8vIGxldCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIC8vIGJ1dHRvbi5pbm5lckhUTUwgPSBcIitcIjtcbiAgICAvLyBsZXQgYnV0dG9uMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgLy8gYnV0dG9uMi5pbm5lckhUTUwgPSBcIi1cIjtcblxuICAgIC8vIC8vIDIuIEFwcGVuZCBzb21ld2hlcmVcbiAgICAvLyBsZXQgYm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpXG4gICAgLy8gYm9keS5hcHBlbmRDaGlsZChidXR0b24pO1xuXG4gICAgLy8gYm9keS5hcHBlbmRDaGlsZChidXR0b24yKTtcblxuICAgIC8vIC8vIDMuIEFkZCBldmVudCBoYW5kbGVyXG4gICAgLy8gYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIgKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG5cbiAgICAvLyB9KTtcbiAgICAvLyBidXR0b24yLmFkZEV2ZW50TGlzdGVuZXIgKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XG4gICAgLy8gICBzdGFydERhdGU9JyZzdGFydF9kYXRlPTIwMTgtMDEtMDEnXG5cbiAgICAvLyAgIHN2Zy5leGl0KCkucmVtb3ZlKClcblxuICAgIC8vIGRyYXdWYXJQcmljZUNoYXJ0KGV0aGVyUHJpY2VEYXRhLCcjZXRoZXItdmFyJyx3aWR0aCxoZWlnaHQpO1xuICAgIC8vIGRyYXdWYXJQcmljZUNoYXJ0KGJpdGNvaW5QcmljZURhdGEsJyNiaXRjb2luLXZhcicsd2lkdGgsaGVpZ2h0KTtcblxuICAgIC8vIH0pO1xuICB9XG59XG4iLCIvLyBEcmF3IHByaWNlIGNoYXJ0XG5cbmZ1bmN0aW9uIGRyYXdWYXJQcmljZUNoYXJ0KGRhdGEsIGlkLCB3aWR0aCwgaGVpZ2h0LCBjdXJyZW5jeSkge1xuICBxdWV1ZSgpXG4gICAgLmRlZmVyKGQzLmNzdiwgZGF0YSlcbiAgICAuYXdhaXQobWFrZUdyYXBocyk7XG5cbiAgZnVuY3Rpb24gbWFrZUdyYXBocyhlcnJvciwgdHJhbnNhY3Rpb25zRGF0YSkge1xuICAgIGxvYWRpbmcrKztcbiAgICBwcm9ncmVzcyhsb2FkaW5nKTtcbiAgICBcbiAgICBpZiAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBpZC5zdWJzdHIoMSk7XG4gICAgYS50b1N0cmluZygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLmlubmVySFRNTCA9IGA8cD4ke3RyYW5zYWN0aW9uc0RhdGFbMF0uT3Blbn0gJHtjdXJyZW5jeX0gPC9wPmA7XG5cbiAgICBsZXQgbWF4O1xuICAgIGxldCBtaW47XG4gICAgbGV0IGZpcnN0RGF0ZTtcbiAgICBsZXQgbGFzdERhdGU7XG5cbiAgICBtYXggPSBkMy5tYXgodHJhbnNhY3Rpb25zRGF0YSwgZCA9PiArZC5IaWdoIC0gZC5Mb3cpO1xuICAgIG1pbiA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2ggLSBkLkxvdyk7XG4gICAgbGV0IGF2ZyA9IGQzLm1lYW4odHJhbnNhY3Rpb25zRGF0YSwgZCA9PiArZC5IaWdoIC0gZC5Mb3cpO1xuICAgIGZpcnN0RGF0ZSA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+IGQuRGF0ZSk7XG4gICAgbGFzdERhdGUgPSBkMy5tYXgodHJhbnNhY3Rpb25zRGF0YSwgZCA9PiBkLkRhdGUpO1xuXG5cblxuICAgIGF2ZyA9IGF2Zy50b0ZpeGVkKDEpO1xuICAgIG1heCA9IG1heC50b0ZpeGVkKDEpO1xuICAgIC8vbWluID0gbWluLnRvRml4ZWQoMSk7XG5cbiAgICAvLyBQcmludCBzdGF0c1xuICAgIGNvbnNvbGUubG9nKGEpXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKyctc3RhdCcpLmlubmVySFRNTD1gXG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj5EYXRlczogJHtmaXJzdERhdGV9IHRvICR7bGFzdERhdGV9PC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPk1heCBQcmljZTogJHttYXh9ICR7Y3VycmVuY3l9PC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPk1pbiBQcmljZTogJHttaW4udG9GaXhlZCgxKX0gJHtjdXJyZW5jeX08L2xpPlxuICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+QXZlcmFnZSBWYXJpYWJpbGl0eSBpbiBQcmljZTogJHthdmd9ICR7Y3VycmVuY3l9PC9saT5cbiAgICAgIGBcbiAgICAgIFxuICBcbiAgICAvLyBtaW4gPSBtaW4udG9GaXhlZCgwKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKS5pbm5lckhUTUwgPSBgIDxwPiBNYXg6ICR7bWF4fSBBdmVyYWdlOiAke2F2Z30gJHtjdXJyZW5jeX0gPC9wPmA7XG5cblxuICAgIGNvbnN0IHggPSBkMy50aW1lLnNjYWxlKClcbiAgICAgIC5kb21haW4oW25ldyBEYXRlKGZpcnN0RGF0ZSksIG5ldyBEYXRlKGxhc3REYXRlKV0pXG4gICAgICAucmFuZ2UoWzEwLCB3aWR0aCAtIDQxXSk7IC8vIExlZnQgcmlnaHQgcG9zaXRpb24gZm9yIGRhdGUgY2hhcnRcblxuICAgIGNvbnN0IHhBeGlzID0gZDMuc3ZnLmF4aXMoKVxuICAgICAgLnNjYWxlKHgpO1xuXG5cbiAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAuZG9tYWluKFswLCBtYXggLSBtaW5dKSAvLyBCb3VuZGFyaWVzIGZvciBjaGFydFxuICAgICAgLnJhbmdlKFswLCBoZWlnaHQgLSAxMCAtIG1hcmdpbkJvdHRvbV0pOyAvLyBib3VuZGFyaWVzIGZvciBkYXRhXG5cbiAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoaWQpXG4gICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgYmdjb2xvcik7XG5cblxuICAgIHN2Zy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgLmRhdGEodHJhbnNhY3Rpb25zRGF0YSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdyZWN0JykgLy8gYXBwZW5kIHN2ZyB0byBkaXZcbiAgICAgIC5hdHRyKCd4JywgKGQsIGkpID0+IHdpZHRoICsgMCAtIHdpZHRoIC8gdHJhbnNhY3Rpb25zRGF0YS5sZW5ndGggLSAoaSAqICgod2lkdGggLSA1MCkgLyB0cmFuc2FjdGlvbnNEYXRhLmxlbmd0aCkpKVxuICAgICAgLmF0dHIoJ3knLCBkID0+IGhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIHNjYWxlKGQuSGlnaCAtIGQuTG93KSlcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBkID0+IHNjYWxlKGQuSGlnaCAtIGQuTG93KSlcbiAgICAgIC5hdHRyKCd3aWR0aCcsIGQgPT4gd2lkdGggLyB0cmFuc2FjdGlvbnNEYXRhLmxlbmd0aClcbiAgICAgIC5zdHlsZSgnZmlsbCcsICd3aGl0ZScpO1xuXG5cblxuICAgIHN2Zy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDE1MDApXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBjaGFydENvbG9yKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDMwMDApXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAoZCkgPT4ge1xuICAgICAgaWYgKGQuSGlnaC1kLkxvdyA+IGF2ZykgeyAgIC8vVGhyZXNob2xkIG9mIDE1XG4gICAgICAgICAgcmV0dXJuIFwib3JhbmdlXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBjaGFydENvbG9yO1xuICAgICAgfVxuICB9KTtcblxuXG4gICAgLy8gUHJpY2VcbiAgICBzdmcuc2VsZWN0QWxsKCd0ZXh0JylcbiAgICAgIC5kYXRhKHRyYW5zYWN0aW9uc0RhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgndGV4dCcpXG4gICAgICAudGV4dCgoZCwgaSkgPT4gcGFyc2VJbnQobWluICsgKChtYXggLSBtaW4pICogKGkgKiAwLjEpKSkpXG4gICAgICAuYXR0cigndGV4dC1hbmNob3InLCAnbWlkZGxlJylcbiAgICAgIC5hdHRyKCd4JywgKCkgPT4gMjApXG4gICAgICAuYXR0cigneScsIChkLCBpKSA9PiBoZWlnaHQgLSBtYXJnaW5Cb3R0b20gLSAoaSAqICgoaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gZm9udFNpemUpIC8gMTApKSlcbiAgICAgIC5hdHRyKCdmb250LWZhbWlseScsIGZvbnQpXG4gICAgICAuYXR0cignZm9udC1zaXplJywgZm9udFNpemUpXG4gICAgICAuYXR0cignZmlsbCcsICdibGFjaycpO1xuXG4gICAgLy8gRGF0ZVxuICAgIGNvbnN0IHRtcCA9IGhlaWdodCAtIG1hcmdpbkJvdHRvbTtcblxuICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSg0MCwnICsgdG1wICsgJyknKVxuICAgICAgLmNhbGwoeEF4aXMpXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0JylcbiAgICAgIC5hdHRyKCd5JywgMClcbiAgICAgIC5hdHRyKCd4JywgOSlcbiAgICAgIC5hdHRyKCdkeScsICcuMzVlbScpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3JvdGF0ZSg5MCknKVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKVxuICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpO1xuICB9XG4gIHJldHVybiAnZG9uZSc7XG59XG4iLCIvLyBUaGlzIGZ1bmN0aW9uIHNob3dzIGxvYWRpbmcgYmFyIHdoZW4gZGF0YSBpcyBsb2FkaW5nLlxuZnVuY3Rpb24gcHJvZ3Jlc3MobG9hZGluZykge1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MnKS5pbm5lckhUTUwgPSBgTG9hZGluZyBkYXRhOiAkeyhsb2FkaW5nIC8gNiAqIDEwMCkudG9GaXhlZCgwKSB9JWA7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcycpLnN0eWxlLndpZHRoID0gYCR7KGxvYWRpbmcgLyA2KSAqIDEwMH0lYDtcbiAgaWYgKGxvYWRpbmcgPT0gNiB8fCBsb2FkaW5nID09IDApIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtYmFyJykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgfSBlbHNlIHtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvZ3Jlc3MtYmFyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gIH1cbn1cbiIsIi8vIFVzZXIgaW5wdXRzIGZyb20gcmFkaW9idXRvbnNcbi8qIGVzbGludCBuby11bmRlZjogIDAgKi9cbmZ1bmN0aW9uIGRyYXdDaGFydHNTZWxlY3RNb250aHMobnVtYmVyTW9udGhzKSB7XG4gIGlmIChsb2FkaW5nID09IDYpIHsgLy8gcHJldmVudCBzdGFydGluZyB0aGlzIGZ1bmN0aW9ucyB3aGlsZSB1c2VyIGlzIGNsaWNraW5nIG9uIHJhZGlvIGJ1dHRvbnMgdG8gZmFzdFxuICAgIGxvYWRpbmcgPSAwO1xuICAgIGRyYXdDaGFydHMoc2V0RGF0ZVNjb3BlKG51bWJlck1vbnRocykpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFsbGRhdGEoKSB7XG4gIGlmIChsb2FkaW5nID09IDYpIHtcbiAgICBsb2FkaW5nID0gMDtcbiAgICBkcmF3Q2hhcnRzKCcyMDE3LTA3LTAxJyk7XG4gIH1cbn1cbiIsImZ1bmN0aW9uIHNldERhdGVTY29wZShwZXJpb2QpIHtcbiAgICB2YXIgZCA9IG5ldyBEYXRlKClcblxuICAgIGQuc2V0TW9udGgoZC5nZXRNb250aCgpIC0gcGVyaW9kKTtcbiAgICByZXR1cm4gZC50b0lTT1N0cmluZygpLnNsaWNlKDAsMTApO1xufVxuXG5cbmZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgdHlwZSkge1xuICAgIFxuICAgIGxldCBzdGFydERhdGU9JyZzdGFydF9kYXRlPScrZGF0ZVxuICAgIFxuICAgIGxldCBiaXRjb2luUHJpY2VEYXRhPSdodHRwczovL3d3dy5xdWFuZGwuY29tL2FwaS92My9kYXRhc2V0cy9CSVRTVEFNUC9VU0QuY3N2P2FwaV9rZXk9ZnphblpDMzI5N0pzaWQtRTh2Q0YnK3N0YXJ0RGF0ZTtcbiAgICBsZXQgZXRoZXJQcmljZURhdGE9J2h0dHBzOi8vd3d3LnF1YW5kbC5jb20vYXBpL3YzL2RhdGFzZXRzL0dEQVgvRVRIX0VVUi5jc3Y/YXBpX2tleT1memFuWkMzMjk3SnNpZC1FOHZDRicrc3RhcnREYXRlO1xuICAgIGxldCBsaXRlY29pblByaWNlRGF0YT0naHR0cHM6Ly93d3cucXVhbmRsLmNvbS9hcGkvdjMvZGF0YXNldHMvR0RBWC9MVENfRVVSLmNzdj9hcGlfa2V5PWZ6YW5aQzMyOTdKc2lkLUU4dkNGJytzdGFydERhdGU7XG4gICAgXG4gICAgaWYgKHR5cGU9PSdiaXRjb2luJykgcmV0dXJuIGJpdGNvaW5QcmljZURhdGFcbiAgICBpZiAodHlwZT09J2V0aGVyJykgcmV0dXJuIGV0aGVyUHJpY2VEYXRhXG4gICAgaWYgKHR5cGU9PSdsaXRlY29pbicpIHJldHVybiBsaXRlY29pblByaWNlRGF0YVxuICAgIH0iXX0=
