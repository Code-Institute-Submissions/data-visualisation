"use strict";var width=340,height=280,marginBottom=50,chartColor="rgb(66, 170, 143)",font="Didact Gothic",fontSize="12",bgcolor="white",loading=0;
"use strict";drawCharts("2017-07-01");
"use strict";function drawCharts(t){drawPriceChart(setDate(t,"ether"),"#ether",width,height,"€"),drawPriceChart(setDate(t,"bitcoin"),"#bitcoin",width,height,"$"),drawPriceChart(setDate(t,"litecoin"),"#litecoin",width,height,"€"),drawVarPriceChart(setDate(t,"ether"),"#ether-var",width,height,"€"),drawVarPriceChart(setDate(t,"bitcoin"),"#bitcoin-var",width,height,"$"),drawVarPriceChart(setDate(t,"litecoin"),"#litecoin-var",width,height,"€")}
"use strict";function drawPriceChart(t,n,e,r,a){queue().defer(d3.csv,t).await(function(t,i){loading+=1,progress(loading),t&&console.log(t);var o=n.substr(1);o.toString(),document.getElementById(o).innerHTML="<p>".concat(i[0].High," ").concat(a," </p>");var c=d3.max(i,function(t){return+t.High}),l=d3.min(i,function(t){return+t.High}),s=d3.min(i,function(t){return t.Date}),d=d3.max(i,function(t){return t.Date}),u=d3.time.scale().domain([new Date(s),new Date(d)]).range([10,e-41]),g=d3.svg.axis().scale(u),f=d3.scale.linear().domain([0,c-l]).range([0,r-10-marginBottom]);if(h){var m=h.select(n);m.exit().remove()}var h=d3.select(n).append("svg").attr("width",e).attr("height",r).style("background-color",bgcolor).append("g");d3.transition().duration(4500);h.selectAll("rect").data(i).enter().append("rect").attr("x",function(t,n){return e-e/i.length-n*((e-50)/i.length)}).attr("y",function(t){return r-marginBottom-f(t.High-l)}).attr("height",function(t){return f(t.High-l)}).attr("width",function(t){return e/i.length}).style("fill","white").append("svg:title").text(function(t){return"Date: ".concat(t.Date," Price: ").concat(t.High)}).append("g"),h.selectAll("rect").transition().duration(1500).style("fill",chartColor),h.selectAll("text").data(i).enter().append("text").text(function(t,n){return parseInt(l+.1*n*(c-l))}).attr("text-anchor","middle").attr("x",function(){return 20}).attr("y",function(t,n){return r-marginBottom-fontSize+parseInt(fontSize)-n*((r-marginBottom-fontSize)/10)}).attr("font-family",font).attr("font-size",fontSize).attr("fill","black");var p=r-marginBottom;h.append("g").attr("class","x axis").attr("transform","translate(40,".concat(p,")")).call(g).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").attr("font-size",fontSize).style("text-anchor","start")})}
"use strict";function drawVarPriceChart(t,n,e,a,r){queue().defer(d3.csv,t).await(function(t,i){loading+=1,progress(loading),t&&console.log(t);var o=n.substr(1);o.toString(),document.getElementById(o).innerHTML="<p>".concat(i[0].Open," ").concat(r," </p>");var c=d3.max(i,function(t){return+t.High-t.Low}).toFixed(1),l=d3.min(i,function(t){return+t.High-t.Low}),s=d3.mean(i,function(t){return+t.High-t.Low}).toFixed(1),u=d3.min(i,function(t){return t.Date}),g=d3.max(i,function(t){return t.Date});document.getElementById("".concat(o,"-stat")).innerHTML='\n      <li class="list-group-item">Dates:</li>\n      <li class="list-group-item">'.concat(u," to ").concat(g,'</li>\n      <li class="list-group-item">Maximal change in price per day: </li>\n      <li class="list-group-item"> ').concat(c," ").concat(r,'</li>\n      <li class="list-group-item">Minimal change in price per day: </li>\n      <li class="list-group-item"> ').concat(l.toFixed(1)," ").concat(r,'</li>\n      <li class="list-group-item">Average Variability in Price:</li>\n      <li class="list-group-item"> ').concat(s," ").concat(r,"</li>\n      "),document.getElementById(o).innerHTML=" <p> Max: ".concat(c," Average: ").concat(s," ").concat(r," </p>");var d=d3.time.scale().domain([new Date(u),new Date(g)]).range([10,e-41]),m=d3.svg.axis().scale(d),f=d3.scale.linear().domain([0,c-l]).range([0,a-10-marginBottom]),p=d3.select(n).append("svg").attr("width",e).attr("height",a).style("background-color",bgcolor);p.selectAll("rect").data(i).enter().append("rect").attr("x",function(t,n){return e-e/i.length-n*((e-50)/i.length)}).attr("y",function(t){return a-marginBottom-f(t.High-t.Low)}).attr("height",function(t){return f(t.High-t.Low)}).attr("width",function(t){return e/i.length}).style("fill","white"),p.selectAll("rect").transition().duration(1500).style("fill",chartColor).transition().duration(3e3).style("fill",function(t){return t.High-t.Low>s?"orange":chartColor}),p.selectAll("text").data(i).enter().append("text").text(function(t,n){return parseInt(l+.1*n*(c-l))}).attr("text-anchor","middle").attr("x",function(){return 20}).attr("y",function(t,n){return a-marginBottom-n*((a-marginBottom-fontSize)/10)}).attr("font-family",font).attr("font-size",fontSize).attr("fill","black");var h=a-marginBottom;p.append("g").attr("class","x axis").attr("transform","translate(40,".concat(h,")")).call(m).selectAll("text").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(90)").attr("font-size",fontSize).style("text-anchor","start")})}
"use strict";function progress(e){document.getElementById("progress").innerHTML="Loading data: ".concat((e/6*100).toFixed(0),"%"),document.getElementById("progress").style.width="".concat(e/6*100,"%"),document.getElementById("progress-bar").style.display=6===e||0===e?"none":"block"}
"use strict";function drawChartsSelectMonths(a){6==loading&&(loading=0,drawCharts(setDateScope(a)))}function alldata(){6==loading&&(loading=0,drawCharts("2017-07-01"))}
"use strict";function setDateScope(t){var a=new Date;return a.setMonth(a.getMonth()-t),a.toISOString().slice(0,10)}function setDate(t,a){var e="&start_date="+t;return"bitcoin"==a?"https://www.quandl.com/api/v3/datasets/BITSTAMP/USD.csv?api_key=fzanZC3297Jsid-E8vCF"+e:"ether"==a?"https://www.quandl.com/api/v3/datasets/GDAX/ETH_EUR.csv?api_key=fzanZC3297Jsid-E8vCF"+e:"litecoin"==a?"https://www.quandl.com/api/v3/datasets/GDAX/LTC_EUR.csv?api_key=fzanZC3297Jsid-E8vCF"+e:void 0}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNoYXJ0LXNldHRpbmdzLWFuZC1kYXRhLmpzIiwiZHJhdy1jaGFydC5qcyIsImZ1bmN0aW9ucy9kcmF3Q2hhcnRzLmpzIiwiZnVuY3Rpb25zL2RyYXdQcmljZUNoYXJ0LmpzIiwiZnVuY3Rpb25zL2RyYXdWYXJQcmljZUNoYXJ0LmpzIiwiZnVuY3Rpb25zL3Byb2dyZXNzLmpzIiwiZnVuY3Rpb25zL3JhZGlvYnV0dG9ucy5qcyIsImZ1bmN0aW9ucy9zZXREYXRlLmpzIl0sIm5hbWVzIjpbIndpZHRoIiwiaGVpZ2h0IiwibWFyZ2luQm90dG9tIiwiY2hhcnRDb2xvciIsImZvbnQiLCJmb250U2l6ZSIsImJnY29sb3IiLCJkcmF3Q2hhcnRzIiwiZGF0ZSIsImRyYXdQcmljZUNoYXJ0Iiwic2V0RGF0ZSIsImRyYXdWYXJQcmljZUNoYXJ0IiwiZGF0YSIsImlkIiwiY3VycmVuY3kiLCJxdWV1ZSIsImRlZmVyIiwiZXJyb3IiLCJ0cmFuc2FjdGlvbnNEYXRhIiwibG9hZGluZyIsInByb2dyZXNzIiwiY29uc29sZSIsImxvZyIsInN1YnN0ciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJhIiwiaW5uZXJIVE1MIiwiY29uY2F0IiwiSGlnaCIsInRvU3RyaW5nIiwiZDMiLCJtYXgiLCJkIiwiRGF0ZSIsImxhc3REYXRlIiwibWluIiwiZG9tYWluIiwiZmlyc3REYXRlIiwicmFuZ2UiLCJ4QXhpcyIsInN2ZyIsImF4aXMiLCJzY2FsZSIsIngiLCJsaW5lYXIiLCJ0aW1lIiwicGF0aCIsInNlbGVjdCIsImV4aXQiLCJyZW1vdmUiLCJhdHRyIiwic3R5bGUiLCJhcHBlbmQiLCJ0cmFuc2l0aW9uIiwic2VsZWN0QWxsIiwiZW50ZXIiLCJpIiwibGVuZ3RoIiwidGV4dCIsInBhcnNlSW50IiwiZHVyYXRpb24iLCJ0bXAiLCJjYWxsIiwiY3N2IiwiYXdhaXQiLCJtYWtlR3JhcGhzIiwiT3BlbiIsIkxvdyIsInRvRml4ZWQiLCJtZWFuIiwiYXZnIiwiZGlzcGxheSIsImRyYXdDaGFydHNTZWxlY3RNb250aHMiLCJudW1iZXJNb250aHMiLCJzZXREYXRlU2NvcGUiLCJwZXJpb2QiLCJzZXRNb250aCIsInNsaWNlIiwidHlwZSIsImJpdGNvaW5QcmljZURhdGEiLCJzdGFydERhdGUiXSwibWFwcGluZ3MiOiJhQUVBLElBQUFBLE1BQUEsSUFFTUEsT0FBTixJQUNNQyxhQUFOLEdBQ01DLFdBQWUsb0JBQ2ZDLEtBQUFBLGdCQUNBQyxTQUFPLEtBQ1BDLFFBQVcsUUFDWEMsUUFBVTthQ0xoQkMsV0FBVzthQ0pYLFNBQVNBLFdBQVdDLEdBRHBCQyxlQUFBQyxRQUFBRixFQUFBLFNBQUEsU0FBQVIsTUFBQUMsT0FBQSxLQUNBUSxlQUFTRixRQUFUQyxFQUEwQixXQUFBLFdBQUFSLE1BQUFDLE9BQUEsS0FDeEJRLGVBQWVDLFFBQVFGLEVBQU0sWUFBVSxZQUF6QlIsTUFBQUMsT0FBZCxLQUVBUSxrQkFBZUMsUUFBUUYsRUFBTSxTQUFhLGFBQWFSLE1BQU9DLE9BQVEsS0FFdEVVLGtCQUFrQkQsUUFBUUYsRUFBTSxXQUFVLGVBQWNSLE1BQU9DLE9BQS9ELEtBQ0FVLGtCQUFrQkQsUUFBUUYsRUFBTSxZQUFZLGdCQUFnQlIsTUFBT0MsT0FBUTthQ0o3RSxTQUFTUSxlQUFlRyxFQUFNQyxFQUFJYixFQUFPQyxFQUFRYSxHQUZqREMsUUFFQUMsTUFBU1AsR0FBQUEsSUFBQUEsR0FDUE0sTUFJQSxTQUFvQkUsRUFBT0MsR0FDekJDLFNBQVcsRUFDWEMsU0FBU0QsU0FDTEYsR0FBU0ksUUFBUUMsSUFBSUwsR0FBekIsSUFBSUEsRUFBSkosRUFBV1UsT0FBQSxHQUFFRixFQUFBQSxXQUFxQkcsU0FBQUMsZUFBQUMsR0FBQUMsVUFBQSxNQUFBQyxPQUFBVixFQUFBLEdBQUFXLEtBQUEsS0FBQUQsT0FBQWQsRUFBQSxTQUVsQ1ksSUFBRUksRUFBRkMsR0FBQUMsSUFBQWQsRUFBQSxTQUFBZSxHQUFBLE9BQUFBLEVBQUFKLE9BQ0FMLEVBQVNDLEdBQUFBLElBQUFBLEVBQVQsU0FBQVEsR0FB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QixJQUFNVyxFQUFNN0QsRUFBU0MsYUFFckJ1QyxFQUFJWSxPQUFPLEtBQ1JGLEtBQUssUUFBUyxVQUNkQSxLQUFLLFlBRlIsZ0JBQUF2QixPQUVxQ2tDLEVBRnJDLE1BR0dDLEtBQUt2QixHQUNMZSxVQUFVLFFBQ1ZKLEtBQUssSUFBSyxHQUNWQSxLQUFLLElBQUssR0FDVkEsS0FBSyxLQUFNLFNBQ1hBLEtBQUssWUFBYSxjQUNsQkEsS0FBSyxZQUFhOUMsVUFDbEIrQyxNQUFNLGNBQWU7YUM1RzVCLFNBQVNoQyxTQUFTRCxHQURsQkssU0FBQUMsZUFBQSxZQUFBRSxVQUFBLGlCQUFBQyxRQUFBVCxFQUFBLEVBQUEsS0FBQWtELFFBQUEsR0FBQSxLQUNBN0MsU0FBU0osZUFBVCxZQUEyQmdDLE1BQUFwRCxNQUEzQixHQUFBNEIsT0FBMkJULEVBQUEsRUFBQSxJQUEzQixLQUVFSyxTQUFTQyxlQUFlLGdCQUFrQnpCLE1BQTFDd0UsUUFEUy9DLElBQVRELEdBQXdCLElBQWZDLEVBQ1QsT0FDb0M7YUNKdEMsU0FBQWdELHVCQUFBQyxHQUdpQixHQUFYdkQsVUFGTkEsUUFBQSxFQUNBWixXQUFTa0UsYUFBQUEsS0FHTGxFLFNBQUFBLFVBQ0QsR0FBQVksVUFDRkEsUUFBQSxFQUtHWixXQUFXO2FDWmYsU0FBU29FLGFBQWFDLEdBQ2xCLElBQUkzQyxFQUFJLElBQUlDLEtBRVYyQyxPQUZGNUMsRUFBSUEsU0FBUUMsRUFBQUEsV0FBWjBDLEdBRUVDLEVBQVM1QyxjQUFBNkMsTUFBZUYsRUFBMUIsSUFLSixTQUFTbEUsUUFBUUYsRUFBTXVFLEdBSW5CLElBQUlDLEVBQUFBLGVBQWlCeEUsRUFPcEIsTUFBQSxXQUFBdUUsRUFMb0IsdUZBQUNFLEVBR1osU0FBTkYsRUFESix1RkFBcUJFLEVBRVgsWUFBTkYsRUFEZSx1RkFBQUUsT0FDbkIiLCJmaWxlIjoidmFyaWFiaWxpdHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IDAgKi9cbi8vIFRoaXMgamF2YXNjcmlwdCBmaWxlIGlzIGxvYWRlZCBmaXJzdC5cbi8vIENoYXJ0cyBjb25maWdcblxuY29uc3Qgd2lkdGggPSAzNDA7XG5jb25zdCBoZWlnaHQgPSAyODA7XG5jb25zdCBtYXJnaW5Cb3R0b20gPSA1MDtcbmNvbnN0IGNoYXJ0Q29sb3IgPSAncmdiKDY2LCAxNzAsIDE0MyknO1xuY29uc3QgZm9udCA9ICdEaWRhY3QgR290aGljJztcbmNvbnN0IGZvbnRTaXplID0gJzEyJztcbmNvbnN0IGJnY29sb3IgPSAnd2hpdGUnO1xuY29uc3QgbG9hZGluZyA9IDA7XG4iLCIvLyBUaGlzIGphdmFzY3JpcHQgZmlsZSBpcyBsYXN0LlxuLy8gSW5pdGlhbGl6YXRpb24gZnVuY3Rpb25zIG9uIHBhZ2Ugc3RhcnQuXG5cbi8vIFdoZW4gcGFnZSBpcyBsb2FkaW5nIGZpcnN0IHRpbWUgbG9hZCBwcmVzZXQgd2l0aCBhbGwgZGF0YSBmb3IgY2hhcnRzLlxuLyogZXNsaW50IG5vLXVuZGVmOiAwICovXG5kcmF3Q2hhcnRzKCcyMDE3LTA3LTAxJyk7XG4iLCIvKiBlc2xpbnQgbm8tdW5kZWY6IDAgbm8tdW51c2VkLXZhcnM6IDAgKi9cbmZ1bmN0aW9uIGRyYXdDaGFydHMoZGF0ZSkge1xuICBkcmF3UHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdldGhlcicpLCAnI2V0aGVyJywgd2lkdGgsIGhlaWdodCwgJ+KCrCcpO1xuICBkcmF3UHJpY2VDaGFydChzZXREYXRlKGRhdGUsICdiaXRjb2luJyksICcjYml0Y29pbicsIHdpZHRoLCBoZWlnaHQsICckJyk7XG4gIGRyYXdQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2xpdGVjb2luJyksICcjbGl0ZWNvaW4nLCB3aWR0aCwgaGVpZ2h0LCAn4oKsJyk7XG5cbiAgZHJhd1ZhclByaWNlQ2hhcnQoc2V0RGF0ZShkYXRlLCAnZXRoZXInKSwgJyNldGhlci12YXInLCB3aWR0aCwgaGVpZ2h0LCAn4oKsJyk7XG4gIGRyYXdWYXJQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2JpdGNvaW4nKSwgJyNiaXRjb2luLXZhcicsIHdpZHRoLCBoZWlnaHQsICckJyk7XG4gIGRyYXdWYXJQcmljZUNoYXJ0KHNldERhdGUoZGF0ZSwgJ2xpdGVjb2luJyksICcjbGl0ZWNvaW4tdmFyJywgd2lkdGgsIGhlaWdodCwgJ+KCrCcpO1xufVxuIiwiLy8gVGhpcyBmdW5jdGlvbiBkcmF3IHByaWNlIGNoYXJ0XG4vKiBlc2xpbnQgbm8tdW5kZWY6IDAgbm8tdW51c2VkLXZhcnM6MCAqL1xuXG5mdW5jdGlvbiBkcmF3UHJpY2VDaGFydChkYXRhLCBpZCwgd2lkdGgsIGhlaWdodCwgY3VycmVuY3kpIHtcbiAgcXVldWUoKVxuICAgIC5kZWZlcihkMy5jc3YsIGRhdGEpXG4gICAgLmF3YWl0KG1ha2VHcmFwaHMpO1xuXG4gIGZ1bmN0aW9uIG1ha2VHcmFwaHMoZXJyb3IsIHRyYW5zYWN0aW9uc0RhdGEpIHtcbiAgICBsb2FkaW5nICs9IDE7XG4gICAgcHJvZ3Jlc3MobG9hZGluZyk7XG4gICAgaWYgKGVycm9yKSB7IGNvbnNvbGUubG9nKGVycm9yKTsgfVxuICAgIGNvbnN0IGEgPSBpZC5zdWJzdHIoMSk7XG4gICAgYS50b1N0cmluZygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLmlubmVySFRNTCA9IGA8cD4ke3RyYW5zYWN0aW9uc0RhdGFbMF0uSGlnaH0gJHtjdXJyZW5jeX0gPC9wPmA7XG5cblxuICAgIGNvbnN0IG1heCA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2gpO1xuICAgIGNvbnN0IG1pbiA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2gpO1xuICAgIGNvbnN0IGZpcnN0RGF0ZSA9IGQzLm1pbih0cmFuc2FjdGlvbnNEYXRhLCBkID0+IGQuRGF0ZSk7XG4gICAgY29uc3QgbGFzdERhdGUgPSBkMy5tYXgodHJhbnNhY3Rpb25zRGF0YSwgZCA9PiBkLkRhdGUpO1xuXG4gICAgY29uc3QgeCA9IGQzLnRpbWUuc2NhbGUoKVxuICAgICAgLmRvbWFpbihbbmV3IERhdGUoZmlyc3REYXRlKSwgbmV3IERhdGUobGFzdERhdGUpXSlcbiAgICAgIC5yYW5nZShbMTAsIHdpZHRoIC0gNDFdKTsgLy8gTGVmdCByaWdodCBwb3NpdGlvbiBmb3IgZGF0ZSBjaGFydFxuXG4gICAgY29uc3QgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAuc2NhbGUoeCk7XG5cblxuICAgIGNvbnN0IHNjYWxlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oWzAsIG1heCAtIG1pbl0pIC8vIEJvdW5kYXJpZXMgZm9yIGNoYXJ0XG4gICAgICAucmFuZ2UoWzAsIGhlaWdodCAtIDEwIC0gbWFyZ2luQm90dG9tXSk7IC8vIGJvdW5kYXJpZXMgZm9yIGRhdGFcblxuICAgIGlmIChzdmcpIHtcbiAgICAgIGNvbnN0IHBhdGggPSBzdmcuc2VsZWN0KGlkKTtcbiAgICAgIHBhdGguZXhpdCgpLnJlbW92ZSgpO1xuICAgIH1cbiAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoaWQpXG4gICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgYmdjb2xvcilcbiAgICAgIC8vIC5jYWxsKGQzLmJlaGF2aW9yLnpvb20oKS5vbihcInpvb21cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgLy8gICBjb25zb2xlLmxvZyhkMy5ldmVudC50cmFuc2xhdGUpXG4gICAgICAvLyAgIHN2Zy5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZDMuZXZlbnQudHJhbnNsYXRlICsgXCIpXCIgKyBcIiBzY2FsZShcIiArIGQzLmV2ZW50LnNjYWxlICsgXCIpXCIpXG4gICAgICAvLyB9KSlcbiAgICAgIC5hcHBlbmQoJ2cnKTtcbiAgICBjb25zdCB0ID0gZDNcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbig0NTAwKTtcblxuICAgIC8vIEJhcnNcbiAgICBzdmcuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgIC5kYXRhKHRyYW5zYWN0aW9uc0RhdGEpXG4gICAgICAuZW50ZXIoKVxuICAgICAgLmFwcGVuZCgncmVjdCcpIC8vIGFwcGVuZCBzdmcgdG8gZGl2XG5cbiAgICAgIC5hdHRyKCd4JywgKGQsIGkpID0+IHdpZHRoIC0gd2lkdGggLyB0cmFuc2FjdGlvbnNEYXRhLmxlbmd0aCAtIChpICogKCh3aWR0aCAtIDUwKSAvIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoKSkpXG4gICAgICAuYXR0cigneScsIGQgPT4gaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gc2NhbGUoZC5IaWdoIC0gbWluKSlcbiAgICAgIC5hdHRyKCdoZWlnaHQnLCBkID0+IHNjYWxlKGQuSGlnaCAtIG1pbikpXG4gICAgICAuYXR0cignd2lkdGgnLCBkID0+IHdpZHRoIC8gdHJhbnNhY3Rpb25zRGF0YS5sZW5ndGgpXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAnd2hpdGUnKVxuICAgICAgLmFwcGVuZCgnc3ZnOnRpdGxlJylcbiAgICAgIC50ZXh0KGQgPT4gYERhdGU6ICR7ZC5EYXRlfSBQcmljZTogJHtkLkhpZ2h9YClcblxuICAgICAgLmFwcGVuZCgnZycpO1xuXG5cbiAgICBzdmcuc2VsZWN0QWxsKCdyZWN0JylcbiAgICAgIC50cmFuc2l0aW9uKClcbiAgICAgIC5kdXJhdGlvbigxNTAwKVxuICAgICAgLnN0eWxlKCdmaWxsJywgY2hhcnRDb2xvcik7XG5cblxuICAgIC8vIFByaWNlXG4gICAgc3ZnLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAuZGF0YSh0cmFuc2FjdGlvbnNEYXRhKVxuICAgICAgLmVudGVyKClcbiAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgLnRleHQoKGQsIGkpID0+IHBhcnNlSW50KG1pbiArICgobWF4IC0gbWluKSAqIChpICogMC4xKSkpKVxuICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpXG4gICAgICAuYXR0cigneCcsICgpID0+IDIwKVxuICAgICAgLmF0dHIoJ3knLCAoZCwgaSkgPT4gaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gZm9udFNpemUgKyBwYXJzZUludChmb250U2l6ZSkgLSAoaSAqICgoaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gZm9udFNpemUpIC8gMTApKSlcbiAgICAgIC5hdHRyKCdmb250LWZhbWlseScsIGZvbnQpXG4gICAgICAuYXR0cignZm9udC1zaXplJywgZm9udFNpemUpXG4gICAgICAuYXR0cignZmlsbCcsICdibGFjaycpO1xuXG4gICAgLy8gRGF0ZVxuICAgIGNvbnN0IHRtcCA9IGhlaWdodCAtIG1hcmdpbkJvdHRvbTtcblxuICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgLmF0dHIoJ2NsYXNzJywgJ3ggYXhpcycpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgYHRyYW5zbGF0ZSg0MCwke3RtcH0pYClcbiAgICAgIC5jYWxsKHhBeGlzKVxuICAgICAgLnNlbGVjdEFsbCgndGV4dCcpXG4gICAgICAuYXR0cigneScsIDApXG4gICAgICAuYXR0cigneCcsIDkpXG4gICAgICAuYXR0cignZHknLCAnLjM1ZW0nKVxuICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICdyb3RhdGUoOTApJylcbiAgICAgIC5hdHRyKCdmb250LXNpemUnLCBmb250U2l6ZSlcbiAgICAgIC5zdHlsZSgndGV4dC1hbmNob3InLCAnc3RhcnQnKTtcblxuXG4gICAgLy8gLy8gMS4gQ3JlYXRlIHRoZSBidXR0b25cbiAgICAvLyBsZXQgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAvLyBidXR0b24uaW5uZXJIVE1MID0gXCIrXCI7XG4gICAgLy8gbGV0IGJ1dHRvbjIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgIC8vIGJ1dHRvbjIuaW5uZXJIVE1MID0gXCItXCI7XG5cbiAgICAvLyAvLyAyLiBBcHBlbmQgc29tZXdoZXJlXG4gICAgLy8gbGV0IGJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKVxuICAgIC8vIGJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcblxuICAgIC8vIGJvZHkuYXBwZW5kQ2hpbGQoYnV0dG9uMik7XG5cbiAgICAvLyAvLyAzLiBBZGQgZXZlbnQgaGFuZGxlclxuICAgIC8vIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyIChcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuXG4gICAgLy8gfSk7XG4gICAgLy8gYnV0dG9uMi5hZGRFdmVudExpc3RlbmVyIChcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgIC8vICAgc3RhcnREYXRlPScmc3RhcnRfZGF0ZT0yMDE4LTAxLTAxJ1xuXG4gICAgLy8gICBzdmcuZXhpdCgpLnJlbW92ZSgpXG5cbiAgICAvLyBkcmF3VmFyUHJpY2VDaGFydChldGhlclByaWNlRGF0YSwnI2V0aGVyLXZhcicsd2lkdGgsaGVpZ2h0KTtcbiAgICAvLyBkcmF3VmFyUHJpY2VDaGFydChiaXRjb2luUHJpY2VEYXRhLCcjYml0Y29pbi12YXInLHdpZHRoLGhlaWdodCk7XG5cbiAgICAvLyB9KTtcbiAgfVxufVxuIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiAwIG5vLXVuZGVmOiAwICovXG4vLyBEcmF3IHByaWNlIGNoYXJ0XG5cbmZ1bmN0aW9uIGRyYXdWYXJQcmljZUNoYXJ0KGRhdGEsIGlkLCB3aWR0aCwgaGVpZ2h0LCBjdXJyZW5jeSkge1xuICBmdW5jdGlvbiBtYWtlR3JhcGhzKGVycm9yLCB0cmFuc2FjdGlvbnNEYXRhKSB7XG4gICAgbG9hZGluZyArPSAxO1xuICAgIHByb2dyZXNzKGxvYWRpbmcpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IGEgPSBpZC5zdWJzdHIoMSk7XG4gICAgYS50b1N0cmluZygpO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpLmlubmVySFRNTCA9IGA8cD4ke3RyYW5zYWN0aW9uc0RhdGFbMF0uT3Blbn0gJHtjdXJyZW5jeX0gPC9wPmA7XG5cblxuICAgIGNvbnN0IG1heCA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+ICtkLkhpZ2ggLSBkLkxvdykudG9GaXhlZCgxKTtcbiAgICBjb25zdCBtaW4gPSBkMy5taW4odHJhbnNhY3Rpb25zRGF0YSwgZCA9PiArZC5IaWdoIC0gZC5Mb3cpO1xuICAgIGNvbnN0IGF2ZyA9IGQzLm1lYW4odHJhbnNhY3Rpb25zRGF0YSwgZCA9PiArZC5IaWdoIC0gZC5Mb3cpLnRvRml4ZWQoMSk7XG4gICAgY29uc3QgZmlyc3REYXRlID0gZDMubWluKHRyYW5zYWN0aW9uc0RhdGEsIGQgPT4gZC5EYXRlKTtcbiAgICBjb25zdCBsYXN0RGF0ZSA9IGQzLm1heCh0cmFuc2FjdGlvbnNEYXRhLCBkID0+IGQuRGF0ZSk7XG5cbiAgICAvLyBQcmludCBzdGF0c1xuICAgIFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2F9LXN0YXRgKS5pbm5lckhUTUwgPSBgXG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj5EYXRlczo8L2xpPlxuICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+JHtmaXJzdERhdGV9IHRvICR7bGFzdERhdGV9PC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPk1heGltYWwgY2hhbmdlIGluIHByaWNlIHBlciBkYXk6IDwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj4gJHttYXh9ICR7Y3VycmVuY3l9PC9saT5cbiAgICAgIDxsaSBjbGFzcz1cImxpc3QtZ3JvdXAtaXRlbVwiPk1pbmltYWwgY2hhbmdlIGluIHByaWNlIHBlciBkYXk6IDwvbGk+XG4gICAgICA8bGkgY2xhc3M9XCJsaXN0LWdyb3VwLWl0ZW1cIj4gJHttaW4udG9GaXhlZCgxKX0gJHtjdXJyZW5jeX08L2xpPlxuICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+QXZlcmFnZSBWYXJpYWJpbGl0eSBpbiBQcmljZTo8L2xpPlxuICAgICAgPGxpIGNsYXNzPVwibGlzdC1ncm91cC1pdGVtXCI+ICR7YXZnfSAke2N1cnJlbmN5fTwvbGk+XG4gICAgICBgO1xuXG5cbiAgICAvLyBtaW4gPSBtaW4udG9GaXhlZCgwKTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKS5pbm5lckhUTUwgPSBgIDxwPiBNYXg6ICR7bWF4fSBBdmVyYWdlOiAke2F2Z30gJHtjdXJyZW5jeX0gPC9wPmA7XG5cblxuICAgIGNvbnN0IHggPSBkMy50aW1lLnNjYWxlKClcbiAgICAgIC5kb21haW4oW25ldyBEYXRlKGZpcnN0RGF0ZSksIG5ldyBEYXRlKGxhc3REYXRlKV0pXG4gICAgICAucmFuZ2UoWzEwLCB3aWR0aCAtIDQxXSk7IC8vIExlZnQgcmlnaHQgcG9zaXRpb24gZm9yIGRhdGUgY2hhcnRcblxuICAgIGNvbnN0IHhBeGlzID0gZDMuc3ZnLmF4aXMoKVxuICAgICAgLnNjYWxlKHgpO1xuXG5cbiAgICBjb25zdCBzY2FsZSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAuZG9tYWluKFswLCBtYXggLSBtaW5dKSAvLyBCb3VuZGFyaWVzIGZvciBjaGFydFxuICAgICAgLnJhbmdlKFswLCBoZWlnaHQgLSAxMCAtIG1hcmdpbkJvdHRvbV0pOyAvLyBib3VuZGFyaWVzIGZvciBkYXRhXG5cbiAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoaWQpXG4gICAgICAuYXBwZW5kKCdzdmcnKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgd2lkdGgpXG4gICAgICAuYXR0cignaGVpZ2h0JywgaGVpZ2h0KVxuICAgICAgLnN0eWxlKCdiYWNrZ3JvdW5kLWNvbG9yJywgYmdjb2xvcik7XG5cblxuICAgIHN2Zy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgLmRhdGEodHJhbnNhY3Rpb25zRGF0YSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCdyZWN0JykgLy8gYXBwZW5kIHN2ZyB0byBkaXZcbiAgICAgIC5hdHRyKCd4JywgKGQsIGkpID0+IHdpZHRoIC0gd2lkdGggLyB0cmFuc2FjdGlvbnNEYXRhLmxlbmd0aCAtIChpICogKCh3aWR0aCAtIDUwKSAvIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoKSkpXG4gICAgICAuYXR0cigneScsIGQgPT4gaGVpZ2h0IC0gbWFyZ2luQm90dG9tIC0gc2NhbGUoZC5IaWdoIC0gZC5Mb3cpKVxuICAgICAgLmF0dHIoJ2hlaWdodCcsIGQgPT4gc2NhbGUoZC5IaWdoIC0gZC5Mb3cpKVxuICAgICAgLmF0dHIoJ3dpZHRoJywgZCA9PiB3aWR0aCAvIHRyYW5zYWN0aW9uc0RhdGEubGVuZ3RoKVxuICAgICAgLnN0eWxlKCdmaWxsJywgJ3doaXRlJyk7XG5cblxuICAgIHN2Zy5zZWxlY3RBbGwoJ3JlY3QnKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDE1MDApXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCBjaGFydENvbG9yKVxuICAgICAgLnRyYW5zaXRpb24oKVxuICAgICAgLmR1cmF0aW9uKDMwMDApXG4gICAgICAuc3R5bGUoJ2ZpbGwnLCAoZCkgPT4ge1xuICAgICAgICBpZiAoZC5IaWdoIC0gZC5Mb3cgPiBhdmcpIHsgLy8gVGhyZXNob2xkIG9mIDE1XG4gICAgICAgICAgcmV0dXJuICdvcmFuZ2UnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjaGFydENvbG9yO1xuICAgICAgfSk7XG5cbiAgICAvLyBQcmljZVxuICAgIHN2Zy5zZWxlY3RBbGwoJ3RleHQnKVxuICAgICAgLmRhdGEodHJhbnNhY3Rpb25zRGF0YSlcbiAgICAgIC5lbnRlcigpXG4gICAgICAuYXBwZW5kKCd0ZXh0JylcbiAgICAgIC50ZXh0KChkLCBpKSA9PiBwYXJzZUludChtaW4gKyAoKG1heCAtIG1pbikgKiAoaSAqIDAuMSkpKSlcbiAgICAgIC5hdHRyKCd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKVxuICAgICAgLmF0dHIoJ3gnLCAoKSA9PiAyMClcbiAgICAgIC5hdHRyKCd5JywgKGQsIGkpID0+IGhlaWdodCAtIG1hcmdpbkJvdHRvbSAtIChpICogKChoZWlnaHQgLSBtYXJnaW5Cb3R0b20gLSBmb250U2l6ZSkgLyAxMCkpKVxuICAgICAgLmF0dHIoJ2ZvbnQtZmFtaWx5JywgZm9udClcbiAgICAgIC5hdHRyKCdmb250LXNpemUnLCBmb250U2l6ZSlcbiAgICAgIC5hdHRyKCdmaWxsJywgJ2JsYWNrJyk7XG5cbiAgICAvLyBEYXRlXG4gICAgY29uc3QgdG1wID0gaGVpZ2h0IC0gbWFyZ2luQm90dG9tO1xuXG4gICAgc3ZnLmFwcGVuZCgnZycpXG4gICAgICAuYXR0cignY2xhc3MnLCAneCBheGlzJylcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlKDQwLCR7dG1wfSlgKVxuICAgICAgLmNhbGwoeEF4aXMpXG4gICAgICAuc2VsZWN0QWxsKCd0ZXh0JylcbiAgICAgIC5hdHRyKCd5JywgMClcbiAgICAgIC5hdHRyKCd4JywgOSlcbiAgICAgIC5hdHRyKCdkeScsICcuMzVlbScpXG4gICAgICAuYXR0cigndHJhbnNmb3JtJywgJ3JvdGF0ZSg5MCknKVxuICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKVxuICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICdzdGFydCcpO1xuICB9XG5cbiAgcXVldWUoKVxuICAgIC5kZWZlcihkMy5jc3YsIGRhdGEpXG4gICAgLmF3YWl0KG1ha2VHcmFwaHMpO1xufVxuIiwiLy8gVGhpcyBmdW5jdGlvbiBzaG93cyBsb2FkaW5nIGJhciB3aGVuIGRhdGEgaXMgbG9hZGluZy5cbmZ1bmN0aW9uIHByb2dyZXNzKGxvYWRpbmcpIHtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2dyZXNzJykuaW5uZXJIVE1MID0gYExvYWRpbmcgZGF0YTogJHsobG9hZGluZyAvIDYgKiAxMDApLnRvRml4ZWQoMCl9JWA7XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcycpLnN0eWxlLndpZHRoID0gYCR7KGxvYWRpbmcgLyA2KSAqIDEwMH0lYDtcbiAgaWYgKGxvYWRpbmcgPT09IDYgfHwgbG9hZGluZyA9PT0gMCkge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1iYXInKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICB9IGVsc2Uge1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9ncmVzcy1iYXInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgfVxufVxuIiwiLy8gVXNlciBpbnB1dHMgZnJvbSByYWRpb2J1dG9uc1xuLyogZXNsaW50IG5vLXVuZGVmOiAgMCAqL1xuZnVuY3Rpb24gZHJhd0NoYXJ0c1NlbGVjdE1vbnRocyhudW1iZXJNb250aHMpIHtcbiAgaWYgKGxvYWRpbmcgPT0gNikgeyAvLyBwcmV2ZW50IHN0YXJ0aW5nIHRoaXMgZnVuY3Rpb25zIHdoaWxlIHVzZXIgaXMgY2xpY2tpbmcgb24gcmFkaW8gYnV0dG9ucyB0byBmYXN0XG4gICAgbG9hZGluZyA9IDA7XG4gICAgZHJhd0NoYXJ0cyhzZXREYXRlU2NvcGUobnVtYmVyTW9udGhzKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYWxsZGF0YSgpIHtcbiAgaWYgKGxvYWRpbmcgPT0gNikge1xuICAgIGxvYWRpbmcgPSAwO1xuICAgIGRyYXdDaGFydHMoJzIwMTctMDctMDEnKTtcbiAgfVxufVxuIiwiZnVuY3Rpb24gc2V0RGF0ZVNjb3BlKHBlcmlvZCkge1xuICAgIHZhciBkID0gbmV3IERhdGUoKVxuXG4gICAgZC5zZXRNb250aChkLmdldE1vbnRoKCkgLSBwZXJpb2QpO1xuICAgIHJldHVybiBkLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwxMCk7XG59XG5cblxuZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCB0eXBlKSB7XG4gICAgXG4gICAgbGV0IHN0YXJ0RGF0ZT0nJnN0YXJ0X2RhdGU9JytkYXRlXG4gICAgXG4gICAgbGV0IGJpdGNvaW5QcmljZURhdGE9J2h0dHBzOi8vd3d3LnF1YW5kbC5jb20vYXBpL3YzL2RhdGFzZXRzL0JJVFNUQU1QL1VTRC5jc3Y/YXBpX2tleT1memFuWkMzMjk3SnNpZC1FOHZDRicrc3RhcnREYXRlO1xuICAgIGxldCBldGhlclByaWNlRGF0YT0naHR0cHM6Ly93d3cucXVhbmRsLmNvbS9hcGkvdjMvZGF0YXNldHMvR0RBWC9FVEhfRVVSLmNzdj9hcGlfa2V5PWZ6YW5aQzMyOTdKc2lkLUU4dkNGJytzdGFydERhdGU7XG4gICAgbGV0IGxpdGVjb2luUHJpY2VEYXRhPSdodHRwczovL3d3dy5xdWFuZGwuY29tL2FwaS92My9kYXRhc2V0cy9HREFYL0xUQ19FVVIuY3N2P2FwaV9rZXk9ZnphblpDMzI5N0pzaWQtRTh2Q0YnK3N0YXJ0RGF0ZTtcbiAgICBcbiAgICBpZiAodHlwZT09J2JpdGNvaW4nKSByZXR1cm4gYml0Y29pblByaWNlRGF0YVxuICAgIGlmICh0eXBlPT0nZXRoZXInKSByZXR1cm4gZXRoZXJQcmljZURhdGFcbiAgICBpZiAodHlwZT09J2xpdGVjb2luJykgcmV0dXJuIGxpdGVjb2luUHJpY2VEYXRhXG4gICAgfSJdfQ==
